# JAVA NIO Non-blocking Server

即使你已经了解了 Java NIO 非阻塞模式的工作特性(Selector, Channel, Buffer等)，设计一个非阻塞的服务器依然很困难，相比于阻塞
的 IO 来说，非阻塞 IO 有很多挑战。本文将会讨论非阻塞服务器的几个难题，并给出一些可能的解决方案。

查找设计非阻塞服务器的资料信息是不容易的，因此，本文所提供的方案都是基于我个人的工作和想法之上的，如果你有更好的想法或者解决方案，
我会很高兴听取这些方案和想法，你可以写邮件或者在 Twitter 上联系我。

本教程描述的想法都是围绕 Java NIO 进行的，但是，我相信某些语言只要有类似 Selector 组件的话，文中的想法也可也用在这些语言上，
据我所知，这些组件都是底层操作系统提供的，所以对你来说你可以将此方法运用在其他语言上。

### GitHub 上的非阻塞服务器
我已经创建了一些简单的这些思想概念验证呈现在本教程，并将其放在 Github 上方便大家查看，以下是 Github 仓库地址：
```
https://github.com/jjenkov/java-nio-server
```

### 非阻塞 IO 管道
非阻塞 IO 管道是由一些处理非阻塞的 IO 组件组成的一个链，其中包括 IO 的读写操作，下图展示了一个简单的非阻塞 IO 管道。  

![Non-blocking IO Pipeline](./images/non-blocking-server-1.png)

一个组件使用 Selector 检测 Channel 什么时候有可读的数据，这个组件读取输入数据，然后根据输入数据生成输出数据，
并将输出数据再次写入到 Channel 中。

一个非阻塞的 IO 管道可能不需要读数据和写数据都包含，有些可能只需要读数据，有些可能只需要写数据。

上图仅仅展示了一个组件，一个非阻塞的 IO 管道有不止一个组件处理输入数据，一个非阻塞管道的长度是由其所完成的功能决定的。

一个非阻塞的 IO 管道可能会同时从多个 Channel 中读取数据，例如，从多个 SocketChannel 中读取数据。

上图的控制流程太简单了，这里是组件通过 Selector 从 Channel 中读取数据，而不是 Channel 将数据推送给 Selector
进入组件，即使上图画的就是那样。


